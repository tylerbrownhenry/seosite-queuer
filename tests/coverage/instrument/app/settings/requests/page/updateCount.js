
var __cov_k$v4R$1_SildsZJZtGCcig = (Function('return this'))();
if (!__cov_k$v4R$1_SildsZJZtGCcig.__coverage__) { __cov_k$v4R$1_SildsZJZtGCcig.__coverage__ = {}; }
__cov_k$v4R$1_SildsZJZtGCcig = __cov_k$v4R$1_SildsZJZtGCcig.__coverage__;
if (!(__cov_k$v4R$1_SildsZJZtGCcig['app/settings/requests/page/updateCount.js'])) {
   __cov_k$v4R$1_SildsZJZtGCcig['app/settings/requests/page/updateCount.js'] = {"path":"app/settings/requests/page/updateCount.js","s":{"1":0,"2":0,"3":1,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"handleError","line":15,"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":60}}},"2":{"name":"updateCount","line":34,"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":57}}},"3":{"name":"(anonymous_3)","line":42,"loc":{"start":{"line":42,"column":13},"end":{"line":42,"column":28}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":4,"column":57}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":17}},"3":{"start":{"line":15,"column":0},"end":{"line":25,"column":1}},"4":{"start":{"line":16,"column":5},"end":{"line":24,"column":8}},"5":{"start":{"line":34,"column":0},"end":{"line":57,"column":1}},"6":{"start":{"line":35,"column":5},"end":{"line":35,"column":43}},"7":{"start":{"line":36,"column":5},"end":{"line":36,"column":29}},"8":{"start":{"line":37,"column":5},"end":{"line":55,"column":6}},"9":{"start":{"line":38,"column":10},"end":{"line":51,"column":13}},"10":{"start":{"line":43,"column":15},"end":{"line":50,"column":16}},"11":{"start":{"line":44,"column":20},"end":{"line":44,"column":70}},"12":{"start":{"line":46,"column":20},"end":{"line":49,"column":23}},"13":{"start":{"line":53,"column":7},"end":{"line":53,"column":30}},"14":{"start":{"line":54,"column":10},"end":{"line":54,"column":60}},"15":{"start":{"line":56,"column":5},"end":{"line":56,"column":28}},"16":{"start":{"line":59,"column":0},"end":{"line":59,"column":29}}},"branchMap":{"1":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":15},"end":{"line":43,"column":15}},{"start":{"line":43,"column":15},"end":{"line":43,"column":15}}]}}};
}
__cov_k$v4R$1_SildsZJZtGCcig = __cov_k$v4R$1_SildsZJZtGCcig['app/settings/requests/page/updateCount.js'];
__cov_k$v4R$1_SildsZJZtGCcig.s['1']++;var utils=require('../../../utils'),requestSchema=require('../../../models/request'),dynamoose=require('dynamoose'),Request=dynamoose.model('Request',requestSchema);__cov_k$v4R$1_SildsZJZtGCcig.s['2']++;q=require('q');function handleError(promise,err,requestId,updatedCount){__cov_k$v4R$1_SildsZJZtGCcig.f['1']++;__cov_k$v4R$1_SildsZJZtGCcig.s['4']++;return promise.reject(err,{system:'AWS',requestId:requestId,status:'warning',message:'Error occured while updating request count. Error: '+err.message,requestId:requestId,updatedCount:updatedCount,func:'updateCount'});}function updateCount(requestId,updatedCount,putObject){__cov_k$v4R$1_SildsZJZtGCcig.f['2']++;__cov_k$v4R$1_SildsZJZtGCcig.s['6']++;console.log('updateCount',putObject);__cov_k$v4R$1_SildsZJZtGCcig.s['7']++;var promise=q.defer();__cov_k$v4R$1_SildsZJZtGCcig.s['8']++;try{__cov_k$v4R$1_SildsZJZtGCcig.s['9']++;utils.updateBy(Request,{requestId:requestId},{$PUT:putObject},function(err){__cov_k$v4R$1_SildsZJZtGCcig.f['3']++;__cov_k$v4R$1_SildsZJZtGCcig.s['10']++;if(err){__cov_k$v4R$1_SildsZJZtGCcig.b['1'][0]++;__cov_k$v4R$1_SildsZJZtGCcig.s['11']++;handleError(promise,err,requestId,updatedCount);}else{__cov_k$v4R$1_SildsZJZtGCcig.b['1'][1]++;__cov_k$v4R$1_SildsZJZtGCcig.s['12']++;promise.resolve({requestId:requestId,updatedCount:updatedCount});}});}catch(err){__cov_k$v4R$1_SildsZJZtGCcig.s['13']++;console.log('err',err);__cov_k$v4R$1_SildsZJZtGCcig.s['14']++;handleError(promise,err,requestId,updatedCount);}__cov_k$v4R$1_SildsZJZtGCcig.s['15']++;return promise.promise;}__cov_k$v4R$1_SildsZJZtGCcig.s['16']++;module.exports=updateCount;
