"use strict";
var __cov_6QkJW3G6aGAr6IzC8ra_1w = (Function('return this'))();
if (!__cov_6QkJW3G6aGAr6IzC8ra_1w.__coverage__) { __cov_6QkJW3G6aGAr6IzC8ra_1w.__coverage__ = {}; }
__cov_6QkJW3G6aGAr6IzC8ra_1w = __cov_6QkJW3G6aGAr6IzC8ra_1w.__coverage__;
if (!(__cov_6QkJW3G6aGAr6IzC8ra_1w['app/actions/scanPage/internal/checkUrl.js'])) {
   __cov_6QkJW3G6aGAr6IzC8ra_1w['app/actions/scanPage/internal/checkUrl.js'] = {"path":"app/actions/scanPage/internal/checkUrl.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"checkUrl","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":56}}},"2":{"name":"(anonymous_2)","line":50,"loc":{"start":{"line":50,"column":23},"end":{"line":50,"column":43}}},"3":{"name":"(anonymous_3)","line":62,"loc":{"start":{"line":62,"column":17},"end":{"line":62,"column":34}}},"4":{"name":"(anonymous_4)","line":73,"loc":{"start":{"line":73,"column":30},"end":{"line":73,"column":50}}},"5":{"name":"copyResponseData","line":87,"loc":{"start":{"line":87,"column":0},"end":{"line":87,"column":51}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":49}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":36}},"7":{"start":{"line":12,"column":0},"end":{"line":81,"column":1}},"8":{"start":{"line":13,"column":5},"end":{"line":13,"column":16}},"9":{"start":{"line":15,"column":5},"end":{"line":41,"column":6}},"10":{"start":{"line":16,"column":10},"end":{"line":16,"column":32}},"11":{"start":{"line":17,"column":10},"end":{"line":20,"column":11}},"12":{"start":{"line":18,"column":15},"end":{"line":18,"column":36}},"13":{"start":{"line":19,"column":15},"end":{"line":19,"column":55}},"14":{"start":{"line":23,"column":10},"end":{"line":28,"column":11}},"15":{"start":{"line":24,"column":15},"end":{"line":24,"column":34}},"16":{"start":{"line":25,"column":15},"end":{"line":25,"column":49}},"17":{"start":{"line":26,"column":15},"end":{"line":26,"column":35}},"18":{"start":{"line":27,"column":15},"end":{"line":27,"column":44}},"19":{"start":{"line":43,"column":5},"end":{"line":65,"column":13}},"20":{"start":{"line":51,"column":15},"end":{"line":51,"column":51}},"21":{"start":{"line":52,"column":15},"end":{"line":55,"column":16}},"22":{"start":{"line":54,"column":20},"end":{"line":54,"column":72}},"23":{"start":{"line":60,"column":15},"end":{"line":60,"column":31}},"24":{"start":{"line":64,"column":15},"end":{"line":64,"column":28}},"25":{"start":{"line":67,"column":5},"end":{"line":80,"column":6}},"26":{"start":{"line":73,"column":10},"end":{"line":77,"column":13}},"27":{"start":{"line":74,"column":15},"end":{"line":74,"column":57}},"28":{"start":{"line":75,"column":15},"end":{"line":75,"column":40}},"29":{"start":{"line":76,"column":15},"end":{"line":76,"column":27}},"30":{"start":{"line":79,"column":10},"end":{"line":79,"column":25}},"31":{"start":{"line":87,"column":0},"end":{"line":122,"column":1}},"32":{"start":{"line":88,"column":5},"end":{"line":120,"column":6}},"33":{"start":{"line":89,"column":10},"end":{"line":94,"column":11}},"34":{"start":{"line":90,"column":15},"end":{"line":90,"column":34}},"35":{"start":{"line":91,"column":15},"end":{"line":91,"column":65}},"36":{"start":{"line":93,"column":15},"end":{"line":93,"column":35}},"37":{"start":{"line":96,"column":10},"end":{"line":96,"column":40}},"38":{"start":{"line":98,"column":10},"end":{"line":105,"column":11}},"39":{"start":{"line":99,"column":15},"end":{"line":99,"column":50}},"40":{"start":{"line":101,"column":15},"end":{"line":104,"column":16}},"41":{"start":{"line":103,"column":20},"end":{"line":103,"column":64}},"42":{"start":{"line":107,"column":10},"end":{"line":107,"column":29}},"43":{"start":{"line":109,"column":10},"end":{"line":119,"column":11}},"44":{"start":{"line":110,"column":15},"end":{"line":110,"column":60}},"45":{"start":{"line":117,"column":15},"end":{"line":117,"column":49}},"46":{"start":{"line":118,"column":15},"end":{"line":118,"column":49}},"47":{"start":{"line":121,"column":5},"end":{"line":121,"column":25}},"48":{"start":{"line":124,"column":0},"end":{"line":124,"column":26}}},"branchMap":{"1":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":5},"end":{"line":15,"column":5}},{"start":{"line":15,"column":5},"end":{"line":15,"column":5}}]},"2":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":10},"end":{"line":17,"column":10}},{"start":{"line":17,"column":10},"end":{"line":17,"column":10}}]},"3":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":10},"end":{"line":23,"column":10}},{"start":{"line":23,"column":10},"end":{"line":23,"column":10}}]},"4":{"line":49,"type":"cond-expr","locations":[{"start":{"line":49,"column":44},"end":{"line":49,"column":65}},{"start":{"line":49,"column":68},"end":{"line":49,"column":73}}]},"5":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":15},"end":{"line":52,"column":15}},{"start":{"line":52,"column":15},"end":{"line":52,"column":15}}]},"6":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":19},"end":{"line":52,"column":46}},{"start":{"line":52,"column":50},"end":{"line":52,"column":82}},{"start":{"line":52,"column":86},"end":{"line":52,"column":115}},{"start":{"line":52,"column":119},"end":{"line":52,"column":132}}]},"7":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":5},"end":{"line":67,"column":5}},{"start":{"line":67,"column":5},"end":{"line":67,"column":5}}]},"8":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":5},"end":{"line":88,"column":5}},{"start":{"line":88,"column":5},"end":{"line":88,"column":5}}]},"9":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":10},"end":{"line":89,"column":10}},{"start":{"line":89,"column":10},"end":{"line":89,"column":10}}]},"10":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":10},"end":{"line":98,"column":10}},{"start":{"line":98,"column":10},"end":{"line":98,"column":10}}]},"11":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":15},"end":{"line":101,"column":15}},{"start":{"line":101,"column":15},"end":{"line":101,"column":15}}]},"12":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":10},"end":{"line":109,"column":10}},{"start":{"line":109,"column":10},"end":{"line":109,"column":10}}]}}};
}
__cov_6QkJW3G6aGAr6IzC8ra_1w = __cov_6QkJW3G6aGAr6IzC8ra_1w['app/actions/scanPage/internal/checkUrl.js'];
__cov_6QkJW3G6aGAr6IzC8ra_1w.s['1']++;var linkObj=require('./linkObj');__cov_6QkJW3G6aGAr6IzC8ra_1w.s['2']++;var reasons=require('./messages').reasons;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['3']++;var simpleResponse=require('./simpleResponse');__cov_6QkJW3G6aGAr6IzC8ra_1w.s['4']++;var bhttp=require('bhttp');__cov_6QkJW3G6aGAr6IzC8ra_1w.s['5']++;var extend=require('extend');__cov_6QkJW3G6aGAr6IzC8ra_1w.s['6']++;var isString=require('is-string');function checkUrl(link,baseUrl,cache,options,retry){__cov_6QkJW3G6aGAr6IzC8ra_1w.f['1']++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['8']++;var cached;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['9']++;if(typeof retry==='undefined'){__cov_6QkJW3G6aGAr6IzC8ra_1w.b['1'][0]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['10']++;console.log('retry?');__cov_6QkJW3G6aGAr6IzC8ra_1w.s['11']++;if(isString(link)===true){__cov_6QkJW3G6aGAr6IzC8ra_1w.b['2'][0]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['12']++;link=linkObj(link);__cov_6QkJW3G6aGAr6IzC8ra_1w.s['13']++;linkObj.resolve(link,baseUrl,options);}else{__cov_6QkJW3G6aGAr6IzC8ra_1w.b['2'][1]++;}__cov_6QkJW3G6aGAr6IzC8ra_1w.s['14']++;if(link.url.resolved===null){__cov_6QkJW3G6aGAr6IzC8ra_1w.b['3'][0]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['15']++;link.broken=true;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['16']++;link.brokenReason='BLC_INVALID';__cov_6QkJW3G6aGAr6IzC8ra_1w.s['17']++;linkObj.clean(link);__cov_6QkJW3G6aGAr6IzC8ra_1w.s['18']++;return Promise.resolve(link);}else{__cov_6QkJW3G6aGAr6IzC8ra_1w.b['3'][1]++;}}else{__cov_6QkJW3G6aGAr6IzC8ra_1w.b['1'][1]++;}__cov_6QkJW3G6aGAr6IzC8ra_1w.s['19']++;var request=bhttp.request(link.url.resolved,{discardResponse:true,headers:{'user-agent':options.userAgent},method:retry!==405?(__cov_6QkJW3G6aGAr6IzC8ra_1w.b['4'][0]++,options.requestMethod):(__cov_6QkJW3G6aGAr6IzC8ra_1w.b['4'][1]++,'get')}).then(function(response){__cov_6QkJW3G6aGAr6IzC8ra_1w.f['2']++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['20']++;response=simpleResponse(response);__cov_6QkJW3G6aGAr6IzC8ra_1w.s['21']++;if((__cov_6QkJW3G6aGAr6IzC8ra_1w.b['6'][0]++,response.statusCode===405)&&(__cov_6QkJW3G6aGAr6IzC8ra_1w.b['6'][1]++,options.requestMethod==='head')&&(__cov_6QkJW3G6aGAr6IzC8ra_1w.b['6'][2]++,options.retry405Head===true)&&(__cov_6QkJW3G6aGAr6IzC8ra_1w.b['6'][3]++,retry!==405)){__cov_6QkJW3G6aGAr6IzC8ra_1w.b['5'][0]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['22']++;return checkUrl(link,baseUrl,cache,options,405);}else{__cov_6QkJW3G6aGAr6IzC8ra_1w.b['5'][1]++;}__cov_6QkJW3G6aGAr6IzC8ra_1w.s['23']++;return response;}).catch(function(error){__cov_6QkJW3G6aGAr6IzC8ra_1w.f['3']++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['24']++;return error;});__cov_6QkJW3G6aGAr6IzC8ra_1w.s['25']++;if(typeof retry==='undefined'){__cov_6QkJW3G6aGAr6IzC8ra_1w.b['7'][0]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['26']++;return request.then(function(response){__cov_6QkJW3G6aGAr6IzC8ra_1w.f['4']++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['27']++;copyResponseData(response,link,options);__cov_6QkJW3G6aGAr6IzC8ra_1w.s['28']++;link.http.cached=false;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['29']++;return link;});}else{__cov_6QkJW3G6aGAr6IzC8ra_1w.b['7'][1]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['30']++;return request;}}function copyResponseData(response,link,options){__cov_6QkJW3G6aGAr6IzC8ra_1w.f['5']++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['32']++;if(response instanceof Error===false){__cov_6QkJW3G6aGAr6IzC8ra_1w.b['8'][0]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['33']++;if(response.statusCode!==200){__cov_6QkJW3G6aGAr6IzC8ra_1w.b['9'][0]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['34']++;link.broken=true;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['35']++;link.brokenReason='HTTP_'+response.statusCode;}else{__cov_6QkJW3G6aGAr6IzC8ra_1w.b['9'][1]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['36']++;link.broken=false;}__cov_6QkJW3G6aGAr6IzC8ra_1w.s['37']++;link.http.response=response;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['38']++;if(link.url.resolved!==response.url){__cov_6QkJW3G6aGAr6IzC8ra_1w.b['10'][0]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['39']++;link.url.redirected=response.url;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['40']++;if(link.base.resolved!==null){__cov_6QkJW3G6aGAr6IzC8ra_1w.b['11'][0]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['41']++;linkObj.relation(link,link.url.redirected);}else{__cov_6QkJW3G6aGAr6IzC8ra_1w.b['11'][1]++;}}else{__cov_6QkJW3G6aGAr6IzC8ra_1w.b['10'][1]++;}}else{__cov_6QkJW3G6aGAr6IzC8ra_1w.b['8'][1]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['42']++;link.broken=true;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['43']++;if(reasons['ERRNO_'+response.code]!=null){__cov_6QkJW3G6aGAr6IzC8ra_1w.b['12'][0]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['44']++;link.brokenReason='ERRNO_'+response.code;}else{__cov_6QkJW3G6aGAr6IzC8ra_1w.b['12'][1]++;__cov_6QkJW3G6aGAr6IzC8ra_1w.s['45']++;link.brokenReason='BLC_UNKNOWN';__cov_6QkJW3G6aGAr6IzC8ra_1w.s['46']++;link.actualReason=response.code;}}__cov_6QkJW3G6aGAr6IzC8ra_1w.s['47']++;linkObj.clean(link);}__cov_6QkJW3G6aGAr6IzC8ra_1w.s['48']++;module.exports=checkUrl;
